<!DOCTYPE html>
<html lang="en">
<head>
    <title>WebRTC: Overview</title>

    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width"/>

    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:400,900&amp;subset=latin-ext" rel="stylesheet"/>

    <!-- Shower Theme -->
    <link rel="stylesheet" href="vendors/shower-ribbon/styles/screen-16x9.css"/>
    <link rel="stylesheet" href="vendors/shower-warsawjs/styles/main.css"/>

    <!-- Prism.js -->
    <link rel="stylesheet" href="vendors/prism/prism.css"/>
    <link rel="stylesheet" href="modules/custom-prism.css"/>
    <link rel="stylesheet" href="modules/custom-webrtc.css"/>
</head>
<body class="shower list">
    <header class="caption">
        <h1>WarsawJS Slides: Overview</h1>
        <p>We talk about JavaScript. Each month in Warsaw, Poland.</p>
    </header>

    <section class="slide front-page">
        <div class="logo">
            <!-- Logo WarsawJS -->
            <img src="vendors/shower-warsawjs/images/logo.svg" width="400">
        </div>
        <div class="details">
            <!-- 1. Avatar -->
            <img src="pictures/trzeznik.jpg" width="150" height="150" alt="Speaker"/>

            <!-- 2. Speaker -->
            <h2>Tomasz Rzeźnik</h2>

            <!-- 3. Presentation title -->
            <h2><strong>"WebRTC, komunikacja peer-to-peer." PL</strong></h2>

            <!-- 4. Presentation date -->
            <h2>2018-10-10</h2>

            <!-- 5. Contact the speaker -->
            <h2><a href="mailto:rzeznik.tom@gmail.com">rzeznik.tom@gmail.com</a></h2>
        </div>
    </section>

    <section class="slide compact title-box">
        <p><img src="pictures/webRTC-logo.svg" class="title-box__webrtc-logo" alt="webRTC logo" /></p>
        <h1 class="title">Web <span style="font-weight: 400;">Real-Time</span> Communication</h1>
    </section>

    <section class="slide compact rtc-slide rtc-flex rtc-ff">
        <h1 style="margin-bottom: 50px;">What is WebRTC</h1>
        <h3>A set of JavaScript APIs in the browser to enable peer-to-peer, real-time media and data exchange.</h3>
    </section>
    <section class="slide compact">
        <h1>Adapter</h1>
        <div class="rtc-flex" style="justify-content: space-between;">
            <div>
                <p>Same code in all browsers <a href="https://github.com/webrtc/adapter">adapter.js </a></p>
                <ul class="">
                    <li>Remove vendor prefixes</li>
                    <li>Abstracts Chrome/Firefox differences</li>
                    <li>Minimizes effects of spec churn</li>
                </ul>
                
            </div>
            <div>
                <img src="pictures/shim.jpg" width="300" />
            </div>
        </div>
        <div class="links">
            <p><a href="https://github.com/webrtc/adapter">Github</a> | npm install webrtc-adapter | bower install webrtc-adapter<br/>
            <a href="https://webrtc.github.io/adapter/adapter-latest.js">adapter-latest.js</a></p>
        </div>
    </section>
    <section class="slide compact">
        <p><a href="https://github.com/webrtc/adapter">Adapter.js </a> is the glue that sticks your code to the different browser implementations of WebRTC.</p>
        <div class="rtc-flex" style="justify-content: center;">
            <img src="pictures/adapterjs_shim.jpg"/>
        </div>
    </section>
    <section class="slide compact rtc-slide">
        <h1 style="font-size: 24px;">WebRTC across platforms</h1>
        <div class="supported-box">
            <h4 class="fancy"><span>Supported browsers & platforms</span></h4>
            <div class="supported-list">
                <div class="supported-item">
                    <img class="icon" src="pictures/icons/logo/Chrome.svg" />
                    <p>Chrome</p>
                </div>
                <div class="supported-item">
                    <img class="icon" src="pictures/icons/logo/Firefox.svg" />
                    <p>Firefox</p>
                </div>
                <div class="supported-item">
                    <img class="icon" src="pictures/icons/logo/Opera.svg" />
                    <p>Opera</p>
                </div>
                <div class="supported-item">
                    <img class="icon" src="pictures/icons/logo/Android.svg" />
                    <p>Android</p>
                </div>
                <div class="supported-item">
                    <img class="icon" src="pictures/icons/logo/Apple.svg" />
                    <p>iOS</p>
                </div>
            </div>
        </div>
        <div class="rtc-flex supported-box ">
            <div class="supported-beside">
                <h4 class="fancy"><span>Not supported</span></h4>
                <div class="supported-list">
                    <div class="supported-item">
                        <span class="strikethrough"><img class="icon" src="pictures/icons/logo/Internet_Explorer.svg" /></span>
                        <p>IE</p>
                    </div>
                    <div class="supported-item">
                        <span class="strikethrough"><img class="icon" src="pictures/icons/logo/Safari.png" /></span>
                        <p>Safari</p>
                    </div>
                </div>
            </div>
            <div class="supported-beside next">
                <h4 class="fancy"><span>Supported in a different way</span></h4>
                <div class="supported-list">
                    <div class="supported-item">
                        <img class="icon" src="pictures/icons/logo/Microsoft_Edge.svg" />
                        <p>Edge</p>
                    </div>
                    <div class="supported-item">
                        <img class="icon question-mark-icon" src="pictures/icons//QuestionMark.svg" />
                    </div>
                    <div class="supported-item">
                        <p class="">ORTC</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="slide compact rtc-slide">
        <div class="rtc-flex-center" style="height: 100%;">
            <h3>WebRTC API</h3>
        </div>
    </section>
    <section class="slide compact" >
        <h1>Three main RTC components</h1>
        <div class="rtc-flex">
            <ul class="">
                <li>MediaStream</li>
                <li>RTCPeerConnection</li>
                <li>RTCDataChannel</li>
            </ul>
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>MediaStream</h1>
        <div class="rtc-flex-center">
            <img class="media-stream-img" src="pictures/media-stream.png" />
        </div>

    </section>

    <section class="slide compact" style="position: relative;">
        <h1>MediaDevices.getUserMedia()</h1>

        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                const constraints = { video: true, audio: true };

                navigator.mediaDevices.getUserMedia(constraints)
                .then(stream => {
                    const localVideo = document.getElementById('local-video');
                    localVideo.srcObject = stream;
                })
                .catch(error => {
                    console.log("navigator.mediaDevices.getUserMedia error: ", error);
                });
            </code>
        </pre>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>Video capability</h1>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                {
                    audio: true,
                    video: {
                        width: { min: 1024, ideal: 1280, max: 1920 },
                        height: { min: 776, ideal: 720, max: 1080 }
                    }
                }
            </code>
        </pre>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>Video on mobile devices</h1>
        <h3>Access to front camera, if one is available</h3>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                {
                    video: { facingMode: "user" }
                }
            </code>
        </pre>
        <h3>Access rear camera</h3>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                {
                    video: { facingMode: { exact: "environment" } }
                }
            </code>
        </pre>
    </section>

    <section class="slide compact" style="position: relative;">
        <div class="rtc-flex-center" style="flex-direction: column; height: 80%;">
            <h1>Sample: 1.1</h1>
            <h1>Sample: 1.2</h1>
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection</h1>
        <div class="rtc-flex-center">
            <img style="width: 60%;"  src="pictures/webrtc-architecture.png" />
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection: P2P Connection Between Clients</h1>
        <div class="rtc-flex-center">
            <img style="width: 80%;"  src="pictures/p2p-connection.png" />
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection: Key Methods</h1>
        <div style="font-size: 16px;">
            <p>• RTCPeerConnection() – constructor, returns a new RTCPeerConnection object</p>
            <p>• .addStream(mediaStream) – attaches a MediaStream as a local audio / video source</p>
            <p>• .createOffer() – creates offer session description</p>
            <p>• .createAnswer() – creates answer session description</p>
            <p>• .setLocalDescription(description) – sets description as local session description</p>
            <p>• .setRemoteDescription(description) – sets description as remote session description</p>
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>Signaling plane</h1>
        <p>Signaling is the process of coordinating communication and is use to exchange information:</p>
        <div style="font-size: 16px;">
            <p>– Session control messages used to open or close communication.</p>
            <p>– Error messages. – Media metadata such as codec settings, bandwidth and media types.</p>
            <p>– Key data, used to establish secure connections.</p>
            <p>– Network data, such as a host's IP address and port as seen by the outside world.</p>
        </div>
    </section>
    <section class="slide compact" style="position: relative;">
        <h1>SDP structure</h1>
        <div class="rtc-flex-center">
            <img style="width: 60%;"  src="pictures/SDP_1.png" />
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>SDP structure (conti.)</h1>
        <div class="rtc-flex-center">
            <img style="width: 60%;"  src="pictures/SDP_2.png" />
        </div>
    </section>
    
    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection: Connection Establishment</h1>
        <div class="rtc-flex-center">
            <img style="width: 80%;"  src="pictures/connection-establishment.png" />
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection: Connection Establishment</h1>
        <div class="rtc-flex-center">
            <img style="width: 50%;"  src="pictures/webrtc-complete-diagram.png" />
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <div class="rtc-flex-center" style="flex-direction: column; height: 80%;">
            <h1>Sample: 2.1</h1>
        </div>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection (conti.)</h1>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                const servers = null;
                const alice = new RTCPeerConnection(servers);
                const bob = new RTCPeerConnection(servers);
            </code>
        </pre>
        <p style="position: absolute; bottom: 0;"><a href="chrome://webrtc-internals/" target="_blank">chrome://webrtc-internals/</a></p>
    </section>

    <section class="slide compact" style="position: relative;">
        <h1>RTCPeerConnection (conti.)</h1>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                servers: [
                {
                    "urls":"stun:u1.xirsys.com"
                }, {
                    "username":"dec22e 00-a1ff-11e7-9bfc- ce8483d9a683",
                    "urls":"turn:u1.xirsys.com:80?transport=udp",
                    "credentia l":"dec22e78-a1ff-11e7-98bd-5f53926dfc20"
                }
                ...
                ]
            </code>
        </pre>
    </section>

    <section class="slide compact"style="position: relative;">
        <h1>RTCDataChannel</h1>
        <div class="rtc-flex">                
            <ul class="">
                <li>Ultra-low latency</li>
                <li>Unreliable or reliable</li>
                <li>Secure - Stream Control Transmission Protocol (STCP) mandatory</li>
            </ul>
        </div>
    </section>
    <section class="slide compact"style="position: relative;">
        <h1>Not Only Media – WebRTC Data Channels</h1>
        <div style="font-size: 18px;" >
            <p>• Enable exchange of arbitrary application data between peers</p>
            <p>• Think WebSockets, but peer-to-peer</p>
            <p>• Customizable delivery properties:</p>
                <p>• Reliable or partially reliable delivery of sent messages</p>
                <p>• In-order or out-of-order delivery of sent messages</p>
                <p>• RTCDataChannel objects, created using RTCPeerConnection.createDataChannel()</p>
            <p>• Some exciting ideas and use cases out there</p>
        </div>
    </section>

    <section class="slide compact"style="position: relative;">
        <h1>The WebRTC Protocol Stack</h1>
        <div style="font-size: 18px;" >
            <p>• Peer-to-peer connection is established over UDP using ICE, STUN and TURN</p>
            <p>• We can live without a few lost frames; low latency is more important</p>
            <p>• DTLS (Datagram Transport Layer Security) is used to secure all data transfers between peers</p>
            <p>• Unlike TLS, DTLS can be used over UDP</p>
            <p>• Encryption is WebRTC’s mandatory feature</p>
            <p>• SRTP (Secure Real-Time Protocol) is used to transport audio and video streams</p>
            <p>• SCTP (Stream Control Transport Protocol) is used to transport application data</p>
        </div>
    </section> 

    <section class="slide compact" style="position: relative;">
        <h1>The WebRTC Protocol Stack (conti.)</h1>
        <div class="rtc-flex-center">
            <img style="width: 50%;"  src="pictures/DataChanel_Datagram.png" />
        </div>
    </section>


    <section class="slide compact"style="position: relative;">
        <h1>RTCDataChannel</h1>
        <pre style="font-size: 18px;" class="language-javascript line-numbers">
            <code>
                const pc = new RTCPeerConnection();
                const dataChannel = pc.createDataChannel('sendDataChannel', {
                    reliable: true;
                });
                dataChannel.onerror = (error) => {
                    console.log('Channel Error:', error);
                };
                dataChannel.onmessage = (event) => {
                    console.log('Got Message:', event.data);
                };
                dataChannel.send('Hello World!');
            </code>
        </pre>
    </section>

    <section class="slide compact"style="position: relative;">
        <h1>Resources</h1>
        <p><a href="https://webrtc.github.io/samples/" target="_blank">Samples</a></p>
        <p><a href="https://webrtc.org/" target="_blank">webrtc.org</a></p>
        <p><a href="http://w3c.github.io/webrtc-pc/" target="_blank">w3c.github.io</a></p>
    </section>
    

    <section class="slide compact rtc-slide">
        <div class="rtc-flex-center" style="height: 100%;">
            <h3>Thanks you for listening</h3>
        </div>
    </section>
    <div class="progress"></div>

    <footer class="badge">
        <a href="https://github.com/warsawjs/warsawjs-slides-template">Fork me on GitHub</a>
    </footer>

    <footer class="badge badge-top-left">
        <a href="#" class="fullscreen">Fullscreen</a>
    </footer>

    <script src="vendors/gamepad/gamepad.js"></script>
    <script src="vendors/shower/shower.min.js"></script>
    <script src="vendors/shower-gamepad/shower.gamepad.js"></script>
    <script src="vendors/shower-warsawjs/scripts/fullscreen.js"></script>

    <!-- Prism.js -->
    <script src="vendors/prism/prism.js"></script>
    <script src="modules/custom-prism.js"></script>
</body>
</html>
